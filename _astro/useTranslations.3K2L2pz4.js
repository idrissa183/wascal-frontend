import{r as o}from"./index.BpawKBta.js";var f={exports:{}},i={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E;function v(){if(E)return i;E=1;var r=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function a(c,t,e){var n=null;if(e!==void 0&&(n=""+e),t.key!==void 0&&(n=""+t.key),"key"in t){e={};for(var u in t)u!=="key"&&(e[u]=t[u])}else e=t;return t=e.ref,{$$typeof:r,type:c,key:n,ref:t!==void 0?t:null,props:e}}return i.Fragment=s,i.jsx=a,i.jsxs=a,i}var m;function h(){return m||(m=1,f.exports=v()),f.exports}var w=h();function x(){const[r,s]=o.useState("fr"),[a,c]=o.useState(!1);o.useEffect(()=>{try{const e=localStorage.getItem("ecowatch_language");if(e&&["fr","en"].includes(e))s(e);else{const n=navigator.language.split("-")[0];["fr","en"].includes(n)&&s(n)}}catch(e){console.error("Erreur lors du chargement de la langue:",e)}finally{c(!0)}},[]);const t=e=>{try{["fr","en"].includes(e)||(console.warn(`Langue non supportée: ${e}. Utilisation du français par défaut.`),e="fr"),s(e),localStorage.setItem("ecowatch_language",e),document.documentElement.lang=e,window.dispatchEvent(new CustomEvent("languageChanged",{detail:{language:e}})),console.log(`Langue changée vers: ${e}`)}catch(n){console.error("Erreur lors du changement de langue:",n)}};return o.useEffect(()=>{a&&(document.documentElement.lang=r)},[r,a]),{language:r,setLanguage:t,isInitialized:a,supportedLanguages:["fr","en"]}}function S(){const{language:r}=x(),[s,a]=o.useState({}),[c,t]=o.useState(!0);return o.useEffect(()=>{let e=!0;const n=async d=>{try{t(!0);const l=`/locales/${d}/common.json`,g=await fetch(l);if(!g.ok)throw new Error(`Failed to load translations: ${g.status}`);const p=await g.json();e&&a(p)}catch(l){console.error("Error loading translations:",l)}finally{e&&t(!1)}};n(r);const u=d=>{const l=d.detail.language;n(l)};return window.addEventListener("languageChanged",u),()=>{e=!1,window.removeEventListener("languageChanged",u)}},[r]),s}export{x as a,w as j,S as u};
