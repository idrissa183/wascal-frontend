import{u as b,j as e}from"./useTranslations.3K2L2pz4.js";import{r as n}from"./index.BpawKBta.js";import{A as S}from"./AuthLayout.DZtxryXY.js";import{u as E,t as F,l as C}from"./validation.BVj0pO-N.js";import{u as P}from"./useAuthStore.BcfiTys1.js";import{B as A}from"./Button.BrsDPvoC.js";import{I as f}from"./Input.DshfeKVD.js";import{A as L,L as R}from"./Alert.B0cLzLLj.js";import{F as I}from"./EyeSlashIcon.Cr4r18Zw.js";import{F as _}from"./EyeIcon.Db-6UeUT.js";import{S as B}from"./SocialAuth.DN6d_77d.js";import{a as T}from"./client.Cc-aT41I.js";import"./utils.DGTNTuzh.js";import"./auth.service.DyqDjy0G.js";import"./index.BP3dD5_l.js";const z=({onSuccess:a,onSwitchToRegister:o,globalError:t,onClearGlobalError:i,onSetGlobalError:l})=>{const[s,c]=n.useState(!1),{login:m,isLoading:h,error:d,clearError:u}=P(),r=b(),{register:x,handleSubmit:v,formState:{errors:p,isValid:w},setError:g}=E({resolver:F(C),mode:"onChange"});n.useEffect(()=>{d&&(l(d),u())},[d,l,u]);const N=async k=>{i();try{await m(k),a?.()}catch(y){y instanceof Error&&y.message.includes("invalid_credentials")&&(g("email",{message:r.auth?.invalid_credentials||"Invalid credentials"}),g("password",{message:r.auth?.invalid_credentials||"Invalid credentials"}))}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.auth?.login||"Sign in"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:r.auth?.login_subtitle||"Sign in to your account"})]}),t&&e.jsx(L,{variant:"destructive",onClose:i,children:t}),e.jsxs("form",{onSubmit:v(N),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300",children:r.email||"Email"}),e.jsx(f,{id:"email",type:"email",autoComplete:"email",placeholder:r.emailPlaceholder||"your@email.com",error:p.email?.message,...x("email")})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:r.password||"Password"}),e.jsx("div",{className:"mt-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(f,{id:"password",type:s?"text":"password",autoComplete:"current-password",placeholder:r.passwordPlaceholder||"Your password",error:p.password?.message,className:"pr-10",...x("password")}),e.jsx("button",{type:"button",className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",onClick:()=>c(!s),"aria-label":s?r.hidePassword:r.showPassword,children:s?e.jsx(I,{className:"h-5 w-5"}):e.jsx(_,{className:"h-5 w-5"})})]})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500 dark:border-gray-600 dark:bg-gray-700",...x("rememberMe")}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900 dark:text-gray-300",children:r.rememberMe||"Remember me"})]}),e.jsx("div",{className:"text-sm",children:e.jsx("a",{href:"/auth/forgot-password",className:"font-medium text-primary-600 hover:text-primary-500 dark:text-primary-400 dark:hover:text-primary-300",children:r.forgotPassword||"Forgot password?"})})]}),e.jsx(A,{type:"submit",disabled:!w,loading:h,className:"w-full",children:h?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(R,{size:"sm"}),e.jsx("span",{className:"ml-2",children:r.loggingIn||"Signing in..."})]}):r.login||"Sign in"}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[r.noAccount||"Don't have an account?"," ",e.jsx("button",{type:"button",onClick:o,className:"cursor-pointer font-medium text-primary-600 hover:text-primary-500 dark:text-primary-400 dark:hover:text-primary-300",children:r.registerHere||"Sign up here"})]})})]})]})},G=()=>{const[a,o]=n.useState(null),t=b(),i=()=>{window.location.href="/dashboard"},l=()=>{window.location.href="/auth/register"},s=m=>{o(m)},c=()=>{o(null)};return e.jsx(S,{title:t.auth?.login_title||"Connexion à votre compte",subtitle:t.auth?.login_subtitle||"Connectez-vous pour accéder à votre tableau de bord",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(z,{onSuccess:i,onSwitchToRegister:l,globalError:a,onClearGlobalError:c,onSetGlobalError:s}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400",children:t.orContinueWith||"Ou continuer avec"})})]}),e.jsx(B,{onError:s})]})})},j=document.getElementById("login-root");j&&T.createRoot(j).render(n.createElement(G));
