import{u as N,j as e}from"./useTranslations.3K2L2pz4.js";import{r as s}from"./index.BpawKBta.js";import{u as E,t as _,b as L}from"./validation.BVj0pO-N.js";import{A as h}from"./AuthLayout.DZtxryXY.js";import{u as R}from"./useAuthStore.BcfiTys1.js";import{B as o}from"./Button.BrsDPvoC.js";import{I as S}from"./Input.DshfeKVD.js";import{A as z,L as C}from"./Alert.B0cLzLLj.js";import{F as A}from"./CheckCircleIcon.Bt8hlw3h.js";import{a as V}from"./client.Cc-aT41I.js";import"./utils.DGTNTuzh.js";import"./auth.service.DyqDjy0G.js";import"./index.BP3dD5_l.js";function F({title:r,titleId:a,...l},i){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":a},l),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const p=s.forwardRef(F);function B({title:r,titleId:a,...l},i){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":a},l),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const I=s.forwardRef(B),P=()=>{const[r,a]=s.useState(!1),[l,i]=s.useState(""),{requestPasswordReset:g,isLoading:c,error:m,clearError:n}=R(),t=N(),{register:j,handleSubmit:v,formState:{errors:d,isValid:b},getValues:M,reset:y}=E({resolver:_(L),mode:"onChange"}),w=async x=>{n();try{await g(x.email),i(x.email),a(!0),y()}catch{}},u=()=>{window.location.href="/auth/login"},k=()=>{a(!1),i(""),n()};return r?e.jsx(h,{title:t.auth?.email_sent_title||"Email envoyé",subtitle:t.auth?.check_email||"Vérifiez votre boîte de réception",children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/20",children:e.jsx(A,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Email envoyé avec succès !"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.auth?.password_reset_sent||"Un lien de réinitialisation a été envoyé à"," ",e.jsx("span",{className:"font-medium text-gray-900 dark:text-white break-all",children:l})]}),e.jsx("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(I,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-xs text-blue-800 dark:text-blue-200 font-medium",children:"Instructions :"}),e.jsxs("ul",{className:"text-xs text-blue-700 dark:text-blue-300 mt-1 space-y-1",children:[e.jsx("li",{children:"• Vérifiez votre boîte de réception"}),e.jsx("li",{children:"• Regardez dans vos spams si nécessaire"}),e.jsx("li",{children:"• Le lien expire dans 1 heure"}),e.jsx("li",{children:"• Cliquez sur le lien pour réinitialiser"})]})]})]})}),e.jsx("p",{className:"mt-3 text-xs text-gray-500 dark:text-gray-400",children:t.auth?.email_not_received||"Vous ne recevez pas l'email ? Vérifiez vos spams ou ressayez."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(o,{onClick:k,variant:"outline",className:"w-full",children:"Essayer avec un autre email"}),e.jsxs(o,{onClick:u,variant:"ghost",className:"w-full",children:[e.jsx(p,{className:"h-4 w-4 mr-2"}),t.auth?.back_to_login||"Retour à la connexion"]})]})]})}):e.jsx(h,{title:t.auth?.forgot_password_title||"Mot de passe oublié",subtitle:t.auth?.forgot_password_subtitle||"Entrez votre email pour recevoir un lien de réinitialisation",children:e.jsxs("div",{className:"space-y-6",children:[m&&e.jsx(z,{variant:"destructive",onClose:n,children:m}),e.jsxs("form",{onSubmit:v(w),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:t.email||"Email"}),e.jsx(S,{id:"email",type:"email",autoComplete:"email",placeholder:t.emailPlaceholder||"your@email.com",error:d.email?.message,...j("email")}),!d.email&&e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Entrez l'adresse email associée à votre compte"})]}),e.jsx(o,{type:"submit",disabled:!b||c,className:"w-full",children:c?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(C,{size:"sm"}),e.jsx("span",{className:"ml-2",children:t.auth?.sending||"Envoi en cours..."})]}):t.auth?.send_reset_link||"Envoyer le lien de réinitialisation"}),e.jsx("div",{className:"text-center",children:e.jsxs("button",{type:"button",onClick:u,className:"text-sm text-primary-600 hover:text-primary-500 dark:text-primary-400 dark:hover:text-primary-300 inline-flex items-center",children:[e.jsx(p,{className:"h-4 w-4 mr-1"}),t.auth?.back_to_login||"Retour à la connexion"]})})]})]})})},f=document.getElementById("forgot-password-root");f&&V.createRoot(f).render(s.createElement(P));
