import{u as b,j as e}from"./useTranslations.3K2L2pz4.js";import{r as t}from"./index.BpawKBta.js";import{A as S,T as E}from"./TitleUpdater.B2nVOQO0.js";import{u as F,t as P,l as A}from"./validation.BVj0pO-N.js";import{u as C}from"./useAuthStore.DEd4f2p1.js";import{B as L}from"./Button.C6c-rj7E.js";import{I as f}from"./Input.BD0f6wsr.js";import{A as R,L as I}from"./Alert.qBavEDjr.js";import{F as T}from"./EyeSlashIcon.Cr4r18Zw.js";import{F as _}from"./EyeIcon.Db-6UeUT.js";import{S as B}from"./SocialAuth.Csf_aZqh.js";import{a as G}from"./client.Cc-aT41I.js";import"./utils.DL5Rb5yz.js";import"./auth.service.8-EAQZcQ.js";import"./index.6MJZYV4G.js";const M=({onSuccess:a,onSwitchToRegister:o,globalError:i,onClearGlobalError:l,onSetGlobalError:n})=>{const[s,m]=t.useState(!1),{login:c,isLoading:h,error:d,clearError:u}=C(),r=b(),{register:x,handleSubmit:w,formState:{errors:g,isValid:v},setError:p}=F({resolver:P(A),mode:"onChange"});t.useEffect(()=>{d&&(n(d),u())},[d,n,u]);const N=async k=>{l();try{await c(k),a?.()}catch(y){y instanceof Error&&y.message.includes("invalid_credentials")&&(p("email",{message:r.auth?.invalid_credentials||"Invalid credentials"}),p("password",{message:r.auth?.invalid_credentials||"Invalid credentials"}))}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.auth?.login||"Sign in"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:r.auth?.login_subtitle||"Sign in to your account"})]}),i&&e.jsx(R,{variant:"destructive",onClose:l,children:i}),e.jsxs("form",{onSubmit:w(N),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300",children:r.email||"Email"}),e.jsx(f,{id:"email",type:"email",autoComplete:"email",placeholder:r.emailPlaceholder||"your@email.com",error:g.email?.message,...x("email")})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:r.password||"Password"}),e.jsx("div",{className:"mt-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(f,{id:"password",type:s?"text":"password",autoComplete:"current-password",placeholder:r.passwordPlaceholder||"Your password",error:g.password?.message,className:"pr-10",...x("password")}),e.jsx("button",{type:"button",className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",onClick:()=>m(!s),"aria-label":s?r.hidePassword:r.showPassword,children:s?e.jsx(T,{className:"h-5 w-5"}):e.jsx(_,{className:"h-5 w-5"})})]})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500 dark:border-gray-600 dark:bg-gray-700",...x("rememberMe")}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900 dark:text-gray-300",children:r.rememberMe||"Remember me"})]}),e.jsx("div",{className:"text-sm",children:e.jsx("a",{href:"/auth/forgot-password",className:"font-medium text-primary-600 hover:text-primary-500 dark:text-primary-400 dark:hover:text-primary-300",children:r.forgotPassword||"Forgot password?"})})]}),e.jsx(L,{type:"submit",disabled:!v,loading:h,className:"w-full",children:h?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(I,{size:"sm"}),e.jsx("span",{className:"ml-2",children:r.loggingIn||"Signing in..."})]}):r.login||"Sign in"}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[r.noAccount||"Don't have an account?"," ",e.jsx("button",{type:"button",onClick:o,className:"cursor-pointer font-medium text-primary-600 hover:text-primary-500 dark:text-primary-400 dark:hover:text-primary-300",children:r.registerHere||"Sign up here"})]})})]})]})},$=()=>{const[a,o]=t.useState(null),i=b(),l=()=>{window.location.href="/dashboard"},n=()=>{window.location.href="/auth/register"},s=c=>{o(c)},m=()=>{o(null)};return e.jsx(S,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(M,{onSuccess:l,onSwitchToRegister:n,globalError:a,onClearGlobalError:m,onSetGlobalError:s}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400",children:i.orContinueWith||"Ou continuer avec"})})]}),e.jsx(B,{onError:s})]})})},j=document.getElementById("login-root");j&&G.createRoot(j).render(t.createElement(t.Fragment,null,t.createElement(E,{titleKey:"loginPageTitle"}),t.createElement($)));
