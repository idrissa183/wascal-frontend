import{u as j,j as e}from"./useTranslations.3K2L2pz4.js";import{r as t}from"./index.BpawKBta.js";import{A as p}from"./AuthLayout.DZtxryXY.js";import{a as w}from"./auth.service.DyqDjy0G.js";import{B as m}from"./Button.BrsDPvoC.js";import{L as h,A as b}from"./Alert.B0cLzLLj.js";import{F as k}from"./CheckCircleIcon.Bt8hlw3h.js";import{a as E}from"./client.Cc-aT41I.js";import"./utils.DGTNTuzh.js";import"./index.BP3dD5_l.js";function N({title:i,titleId:s,...a},l){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},a),i?t.createElement("title",{id:s},i):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const _=t.forwardRef(N),V=({token:i})=>{const[s,a]=t.useState("loading"),[l,n]=t.useState(null),[c,g]=t.useState(""),r=j();t.useEffect(()=>{(async()=>{const x=i||(typeof window<"u"?new URLSearchParams(window.location.search).get("token"):null);if(!x){a("error"),n(r.auth?.verify_email_error||"Token de vérification manquant");return}try{await w.verifyEmail(x),a("success")}catch(d){console.error("Email verification failed:",d),a("error"),n(d instanceof Error?d.message:r.auth?.verify_email_error||"La vérification a échoué")}})()},[i,r.auth]);const v=async()=>{if(!c){n("Veuillez entrer votre adresse email");return}a("resending"),n(null);try{setTimeout(()=>{a("success")},2e3)}catch(o){a("error"),n(o instanceof Error?o.message:"Échec de l'envoi de l'email de vérification")}},u=()=>{window.location.href="/auth/login"},y=()=>{switch(s){case"loading":return e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx(h,{size:"lg"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:r.auth?.verify_email_subtitle||"Vérification de votre adresse email en cours"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:r.auth?.please_wait||"Veuillez patienter..."})]})]});case"success":return e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/20",children:e.jsx(k,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:r.auth?.verify_email_success||"Email vérifié avec succès !"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Votre compte est maintenant activé. Vous pouvez vous connecter."})]}),e.jsx(m,{onClick:u,className:"w-full",children:r.auth?.go_to_login||"Aller à la connexion"})]});case"error":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 dark:bg-red-900/20",children:e.jsx(_,{className:"h-8 w-8 text-red-600 dark:text-red-400"})}),e.jsx("h3",{className:"mt-4 text-lg font-semibold text-gray-900 dark:text-white",children:r.auth?.verify_email_error||"Vérification échouée"})]}),l&&e.jsx(b,{variant:"destructive",children:l}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:r.email||"Email"}),e.jsx("input",{type:"email",id:"email",value:c,onChange:o=>g(o.target.value),placeholder:r.emailPlaceholder||"votre@email.com",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:border-gray-600 dark:bg-gray-700 dark:text-white"})]}),e.jsx(m,{onClick:v,disabled:!c.trim(),className:"w-full",children:r.auth?.resend_verification||"Renvoyer le lien de vérification"}),e.jsx(m,{variant:"outline",onClick:u,className:"w-full",children:r.auth?.back_to_login||"Retour à la connexion"})]})]});case"resending":return e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx(h,{size:"lg"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:r.auth?.sending||"Envoi en cours..."}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Envoi d'un nouveau lien de vérification..."})]})]});default:return null}};return e.jsx(p,{title:r.auth?.verify_email_title||"Vérification de l'email",subtitle:s==="success"?"Compte activé avec succès":s==="error"?"Problème de vérification":"Vérification en cours...",children:y()})},f=document.getElementById("verify-email-root");f&&E.createRoot(f).render(t.createElement(V));
